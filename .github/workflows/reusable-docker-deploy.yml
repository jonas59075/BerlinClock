on:
  workflow_call:

jobs:
  deploy:
    runs-on: [self-hosted, Windows, X64]

    defaults:
      run:
        shell: powershell

    steps:
      - name: Login to GHCR
        run: echo "${{ secrets.GHCR_PAT }}" |
             docker login ghcr.io -u "${{ github.actor }}" --password-stdin

      - name: Change directory
        run: Set-Location "C:\\docker\\berlinclock"

      - name: Pull new images
        run: docker compose pull

      - name: Restart containers
        run: docker compose up -d
