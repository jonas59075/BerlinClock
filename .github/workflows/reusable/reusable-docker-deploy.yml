on:
  workflow_call:
    secrets:
      GHCR_PAT:
        required: true

jobs:
  deploy:
    runs-on: [self-hosted, Windows, X64]
    defaults:
      run:
        shell: powershell
    steps:
      - name: Login GHCR
        run: echo "${{ secrets.GHCR_PAT }}" | docker login ghcr.io -u "${{ github.actor }}" --password-stdin
      - name: Navigate
        run: Set-Location "C:\docker\berlinclock"
      - name: Pull New Images
        run: docker compose pull
      - name: Restart Services
        run: docker compose up -d
